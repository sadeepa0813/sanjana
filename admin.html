<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - 3D Store</title>
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
    
    <!-- Supabase Client -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    
    <!-- Stylesheets -->
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Particle Background Canvas -->
    <canvas id="particle-canvas"></canvas>

    <!-- Navigation -->
    <nav>
        <div class="nav-logo">
            <span style="font-size: 1.8rem;">‚öôÔ∏è</span>
            <span>ADMIN PANEL</span>
        </div>
        <div class="nav-links">
            <div class="nav-item active" onclick="showSection('dashboard')">Dashboard</div>
            <div class="nav-item" onclick="showSection('products')">Products</div>
            <div class="nav-item" onclick="showSection('orders')">Orders</div>
            <button class="btn-3d btn-danger btn-small" onclick="handleLogout()">Logout</button>
        </div>
    </nav>

    <!-- Main Container -->
    <div class="container">
        <!-- Dashboard Section -->
        <div id="dashboard" class="admin-section active">
            <h2 class="mb-3">Dashboard Overview</h2>
            
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 25px; margin-bottom: 40px;">
                <div class="card-3d" style="padding: 30px; text-align: center;">
                    <div style="font-size: 3rem; margin-bottom: 10px;">üì¶</div>
                    <h3 class="mono" id="totalProducts" style="font-size: 2.5rem; color: var(--primary);">0</h3>
                    <p style="opacity: 0.7;">Total Products</p>
                </div>
                
                <div class="card-3d" style="padding: 30px; text-align: center;">
                    <div style="font-size: 3rem; margin-bottom: 10px;">üõí</div>
                    <h3 class="mono" id="totalOrders" style="font-size: 2.5rem; color: var(--accent);">0</h3>
                    <p style="opacity: 0.7;">Total Orders</p>
                </div>
                
                <div class="card-3d" style="padding: 30px; text-align: center;">
                    <div style="font-size: 3rem; margin-bottom: 10px;">‚è≥</div>
                    <h3 class="mono" id="pendingOrders" style="font-size: 2.5rem; color: var(--accent);">0</h3>
                    <p style="opacity: 0.7;">Pending Orders</p>
                </div>
                
                <div class="card-3d" style="padding: 30px; text-align: center;">
                    <div style="font-size: 3rem; margin-bottom: 10px;">‚úÖ</div>
                    <h3 class="mono" id="confirmedOrders" style="font-size: 2.5rem; color: var(--success);">0</h3>
                    <p style="opacity: 0.7;">Confirmed Orders</p>
                </div>
            </div>

            <div class="card-3d">
                <h3 class="mb-2">Recent Orders</h3>
                <div id="recentOrdersTable"></div>
            </div>
        </div>

        <!-- Products Section -->
        <div id="products" class="admin-section">
            <h2 class="mb-3">Product Management</h2>
            
            <!-- Add Product Form -->
            <div class="card-3d mb-3">
                <h3 class="mb-2">Add New Product</h3>
                <form id="addProductForm" onsubmit="handleAddProduct(event)">
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px;">
                        <div class="form-group">
                            <label>Product Name *</label>
                            <input type="text" name="name" required placeholder="e.g., Wireless Headphones">
                        </div>
                        
                        <div class="form-group">
                            <label>Price (Rs.) *</label>
                            <input type="number" name="price" required placeholder="15000" min="0" step="0.01">
                        </div>
                        
                        <div class="form-group" style="grid-column: 1 / -1;">
                            <label>Description *</label>
                            <textarea name="description" required rows="2" placeholder="Brief product description..."></textarea>
                        </div>
                        
                        <div class="form-group" style="grid-column: 1 / -1;">
                            <label>Product Image *</label>
                            <div class="file-upload">
                                <input type="file" id="productImage" accept="image/*" required onchange="previewImage(event)">
                                <label for="productImage" class="file-upload-label">
                                    <span>üìÅ</span>
                                    <span id="fileName">Choose image file...</span>
                                </label>
                            </div>
                            <div id="imagePreview" class="file-preview hidden"></div>
                        </div>
                    </div>
                    
                    <button type="submit" class="btn-3d btn-success" style="width: 100%; margin-top: 10px;">
                        ‚ú® Add Product
                    </button>
                </form>
            </div>

            <!-- Products List -->
            <div class="card-3d">
                <h3 class="mb-2">All Products</h3>
                <div id="productsTableContainer"></div>
            </div>
        </div>

        <!-- Orders Section -->
        <div id="orders" class="admin-section">
            <h2 class="mb-3">Order Management</h2>
            
            <div class="card-3d">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; flex-wrap: wrap; gap: 15px;">
                    <h3>All Orders</h3>
                    <div style="display: flex; gap: 10px;">
                        <button class="btn-3d btn-secondary btn-small" onclick="filterOrders('all')">All</button>
                        <button class="btn-3d btn-secondary btn-small" onclick="filterOrders('Pending')">Pending</button>
                        <button class="btn-3d btn-secondary btn-small" onclick="filterOrders('Confirmed')">Confirmed</button>
                        <button class="btn-3d btn-secondary btn-small" onclick="filterOrders('Cancelled')">Cancelled</button>
                    </div>
                </div>
                <div id="ordersTableContainer"></div>
            </div>
        </div>
    </div>

    <!-- Delete Confirmation Modal -->
    <div class="modal-overlay" id="deleteModal">
        <div class="modal-content" style="max-width: 400px;">
            <span class="close-modal" onclick="closeDeleteModal()">&times;</span>
            <div style="text-align: center;">
                <div style="font-size: 4rem; margin-bottom: 15px;">‚ö†Ô∏è</div>
                <h3 class="mb-2">Confirm Delete</h3>
                <p style="opacity: 0.8; margin-bottom: 25px;" id="deleteMessage">
                    Are you sure you want to delete this item?
                </p>
                <div style="display: flex; gap: 15px;">
                    <button class="btn-3d btn-secondary" onclick="closeDeleteModal()" style="flex: 1;">
                        Cancel
                    </button>
                    <button class="btn-3d btn-danger" onclick="confirmDelete()" style="flex: 1;">
                        Delete
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div id="toast"></div>

    <!-- Footer -->
    <footer>
        <div class="footer-content">
            <div class="footer-section">
                <h3>Admin Panel</h3>
                <p>Manage your 3D Store products and orders efficiently.</p>
            </div>
            <div class="footer-section">
                <h3>Quick Actions</h3>
                <div class="footer-links">
                    <a href="index.html" target="_blank">View Store</a>
                    <a href="track.html" target="_blank">Track Orders</a>
                </div>
            </div>
            <div class="footer-section">
                <h3>System Info</h3>
                <p>Version: 1.0.0</p>
                <p>Last Login: <span id="lastLogin">-</span></p>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2024 3D Store Admin. All rights reserved.</p>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="config.js"></script>
    <script src="background.js"></script>
    <script src="admin.js"></script>

    <style>
        .admin-section {
            display: none;
        }
        .admin-section.active {
            display: block;
            animation: fadeInUp 0.4s ease-out;
        }
    </style>
</body>
</html>
